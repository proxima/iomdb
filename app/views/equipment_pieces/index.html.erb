<table width="99%">
  <tr>
    <td width="50%" style="vertical-align:top;">
      <hr>
      <% slot_hash = armor_options %>
      Armors:<br>
      <% @counter = 0 %>
      <% @size = slot_hash[:armors].size %>
      <% slot_hash[:armors].each do |arr| %>
        <%= link_to_remote arr[0], :update => 'eq_piece_div', :position => 'after', :before => 'remove_non_header_rows(\'eq_piece_table\')', :url => { :action => 'fetch_by_slot', :slot => arr[1] } %>
        <% @counter = @counter + 1 %>
        <% if @counter < @size %>
          |
        <% end %>
      <% end %>
      <hr>
      Weapons:<br>
      <% @counter = 0 %>
      <% @size = slot_hash[:weapons].size %>
      <% slot_hash[:weapons].each do |arr| %>
        <%= link_to_remote arr[0], :update => 'eq_piece_div', :position => 'after', :before => 'remove_non_header_rows(\'eq_piece_table\')', :url => { :action => 'fetch_by_slot', :slot => arr[1] } %>
        <% @counter = @counter + 1 %>
        <% if @counter < @size %>
          |
        <% end %>
      <% end %>
      <hr>

      <% if logged_in? %>
        Admin:<br>
        <% slot_hash[:admin].each do |arr| %>
          <%= link_to_remote arr[0], :update => 'eq_piece_div', :position => 'after', :before => 'remove_non_header_rows(\'eq_piece_table\')', :url => { :action => 'fetch_by_slot', :slot => arr[1] } %>
        <% end %>
        <hr>
      <% end %>
    </td>
    <td width="50%" style="vertical-align:top;">
      <hr>
      Filters:
      <%= link_to_remote '(New)', :update => 'filter_div', :position => 'after', :url => { :action => 'create_filter'} %><br>
      <% if session[:filters] %>
        <% session[:filters].each_pair do |k,v| %>
          <%= k.to_s %> - <%= v.to_s %>
        <% end %>
      <% end %>
      <div id="filter_div"></div>
      <hr>
      <% if logged_in? %>
        <%= link_to 'EQ Lists', equipment_piece_lists_path %> <%= link_to '(+)', new_equipment_piece_list_path %>: <div id="current_eq_list"><%= render :partial => 'equipment_piece_lists/view' %></div>
        <% form_remote_for :equipment_piece_list, :url => { :controller => 'equipment_piece_lists', :action => 'change_list' } do |f| %>
          <%= select_tag :id, options_from_collection_for_select(@equipment_lists, :id, :name) %>
          <%= submit_tag 'Set as Active' %>
        <% end %>
      <% end %>
      <hr>
    </td>
  </tr>
</table>

<hr>
<table width=99%>
<tr><th width=80>Search:</th><td><%= text_field_with_auto_complete :equipment_piece, :name, { :class => 'typeahead_edit' }, { :url => formatted_equipment_pieces_path(:js), :method => :get, :param_name => 'search', :skip_style => TRUE } %></td></tr>
</table>
<hr>

<table id="eq_piece_table">
  <tr id="eq_piece_div">
    <th>Name</th>
    <th>Class</th>
    <th>Slots</th>
    <th>Stats</th>
    <th>Tp Value</th>
    <th>Location</th>
    <th></th>
    <th></th>
  </tr>
</table>
